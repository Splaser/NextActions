classID=9
profileID=2
name=Affliction
specName=Affliction

[commonCodes]

[keepHPCmds]

[keepBuffCmds]
黑暗意图@NA_Player=not W_HasBuff(NA_Player, 109773, true)
痛楚@NA_Target=NA_ProfileNo == 2 and NA_IsSolo and W_TargetCanAttack()

[attackCodes]
  local count980 = W_BuffCount(NA_Target, -980, true); --痛楚
  local retain146739 = W_RetainBuff(NA_Target, -146739, true); --腐蚀术
  local retain30108 = W_RetainBuff(NA_Target, -30108, true); --痛苦无常

[attackCmds]
召唤末日守卫@NA_Player=NA_IsMaxDps
灵魂燃烧@NA_Player=NA_IsMaxDps
吸取灵魂@NA_Target=W_HPlevel(NA_Target)<0.2
吸取生命@NA_Target=W_HasBuff(NA_Player, 74434, true)
鬼影缠身@NA_Target=W_HasBuff(NA_Player, 17941, true)
黑暗灵魂：哀难@NA_Player=true
痛楚@NA_Target=count980<10
腐蚀术@NA_Target=not retain146739
痛苦无常@NA_Target=not retain30108
鬼影缠身@NA_Target=not W_RetainBuff(NA_Target, -48181, true) and UnitPower(NA_Player, SPELL_POWER_SOUL_SHARDS)>0
吸取灵魂@NA_Target=W_HPlevel(NA_Target)<0.2

[attackAOECodes]

[attackAOECmds]
召唤末日守卫@NA_Player=NA_IsMaxDps
召唤地狱火@NA_Player=NA_IsMaxDps
灵魂燃烧@NA_Player=NA_IsMaxDps
灵魂交换@NA_Target=count980<5 and W_HasBuff(NA_Player, 86211, true)
黑暗灵魂：哀难@NA_Player=true
腐蚀之种@NA_Target=not W_RetainBuff(NA_Target, -27243, true)
痛楚@NA_Target=count980<10
腐蚀术@NA_Target=not retain146739
痛苦无常@NA_Target=not retain30108
鬼影缠身@NA_Target=not W_RetainBuff(NA_Target, -48181, true) and UnitPower(NA_Player, SPELL_POWER_SOUL_SHARDS)>0
腐蚀之种@NA_Target=not W_RetainBuff(NA_Target, -27243, true)
吸取灵魂@NA_Target=W_HPlevel(NA_Target)<0.2

[assistCodes]

[assistCmds]
