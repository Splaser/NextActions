classID=9
profileID=0
name=Demonology
specName=Demonology

[commonCodes]

[keepHPCmds]
生命通道@NA_Pet=W_HPlevel(NA_Pet) < 0.35 and not UnitIsDead(NA_Pet) and W_HPlevel(NA_Player)>0.5
不灭决心@NA_Player=W_HPlevel(NA_Player)<0.1
灵魂碎裂@NA_Target=W_HPlevel(NA_Player)<0.2
吸取生命@NA_Target=W_HPlevel(NA_Player)<0.2
死亡缠绕@NA_Target=NA_IsSolo and W_HPlevel(NA_Player)<0.5
吸取生命@NA_Target=NA_IsSolo and W_HPlevel(NA_Player)<0.5
生命分流@NA_Player=W_PowerLevel(NA_Player) < 0.2 and W_HPlevel(NA_Player)>0.5

[keepBuffCmds]
黑暗意图@NA_Player=select(3,UnitStat(NA_Player,4))==0
暗影箭@NA_Target=NA_ProfileNo == 0 and NA_IsSolo and W_TargetCanAttack()

[attackCodes]
  local isDemonform = W_HasBuff(NA_Player, 103958, true);  --恶魔变形
  local moltencore = W_BuffCount(NA_Player, 122355, true); --熔火之心 

[attackCmds]
古尔丹之手@NA_Target=true
腐蚀术@NA_Target=not isDemonform and not W_RetainBuff(NA_Target, -146739, true)
黑暗灵魂：学识@NA_Player=true
恶魔掌控@NA_Target=W_GetSpellCooldown(119915)<=0 or W_GetSpellCooldown(119914)<=0
召唤末日守卫@NA_Player=NA_IsMaxDps
恶魔变形@NA_Player=not isDemonform and not W_RetainBuff(NA_Target, -603, true)
恶魔变形@NA_Player=not isDemonform and UnitPower(NA_Player, SPELL_POWER_DEMONIC_FURY)>=1000
腐蚀术@NA_Target=isDemonform and not W_RetainBuff(NA_Target, -603, true)
暗影箭@NA_Target=isDemonform
灵魂之火@NA_Target=moltencore>0
暗影箭@NA_Target=true

[attackAOECodes]

[attackAOECmds]
古尔丹之手@NA_Target=true
腐蚀术@NA_Target=not isDemonform and not W_RetainBuff(NA_Target, -146739, true)
黑暗灵魂：学识@NA_Player=NA_IsMaxDps
召唤地狱火@NA_Player=NA_IsMaxDps
恶魔掌控@NA_Target=NA_IsMaxDps and W_GetSpellCooldown(119914)<=0
恶魔变形@NA_Player=not isDemonform and UnitPower(NA_Player, SPELL_POWER_DEMONIC_FURY)>=1000 
腐蚀术@NA_Target=isDemonform and not W_RetainBuff(NA_Target, -603, true)
灵魂之火@NA_Target=moltencore>0
地狱烈焰@NA_Target=true

[assistCodes]

[assistCmds]
